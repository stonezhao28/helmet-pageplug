{
  "pluginType": "DB",
  "pluginId": "mysql-plugin",
  "unpublishedAction": {
    "name": "selectCustomerInfo",
    "datasource": {
      "name": "highblue-crm",
      "pluginId": "mysql-plugin",
      "messages": [],
      "isAutoGenerated": false,
      "id": "highblue-crm",
      "deleted": false,
      "policies": [],
      "userPermissions": []
    },
    "pageId": "认知症评估工具",
    "actionConfiguration": {
      "timeoutInMillisecond": 10000,
      "paginationType": "NONE",
      "encodeParamsToggle": true,
      "body": "    SELECT DISTINCT\n   s.id,s.`name`,s.age,s.gender_dict_id,s.email,s.mobile,s.`status`,s.del_flag,s.org_id,s.room_id,s.combination_level_dict_id,s.care_level_dict_id,s.create_by,s.create_time,\n      s.checkin_date ,\n      s.contract_end_date,\n      s.address,\n      (CASE s.`status` WHEN 0 THEN '未住' WHEN 1 THEN '已住' WHEN 2 THEN '退住' ELSE '未住' END) AS statusLabel,\n      ( SELECT so.name FROM `view_highblue-org_sys_org` so WHERE s.org_id = so.id and del_flag = 0 ) orgName,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.gender_dict_id AND d.type = 'gender' ) genderDictLabel,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.care_level_dict_id AND d.type = 'care-level' ) careLevelDictLabel,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.combination_level_dict_id AND d.type = 'combination-level' ) combinationLevelDictLabel,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.idcard_type_dict_id AND d.type = 'idcard-type' ) idcardTypeDictLabel,\n      ( SELECT d.name FROM `highblue-dict`.sys_area d WHERE d.id = s.address_id AND d.del_flag = 0 ) addressName,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.nationality_dict_id AND d.type = 'nationality' ) nationalityDictLabel,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.nation_dict_id AND d.type = 'nation' ) nationDictLabel,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.religion_dict_id AND d.type = 'religion' ) religionDictLabel,\n      ( SELECT d.name FROM `highblue-dict`.sys_area d WHERE d.id = s.native_id AND d.del_flag = 0 ) nativeName,\n      ( SELECT d.name FROM `highblue-dict`.sys_area d WHERE d.id = s.census_address_id AND d.del_flag = 0 ) censusAddressName,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.degree_dict_id AND d.type = 'degree' ) degreeDictLabel,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.marital_dict_id AND d.type = 'marital' ) maritalDictLabel,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.medical_insurance_type_dict_id AND d.type = 'medical-insurance-type' ) medicalInsuranceTypeDictLabel,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.political_dict_id AND d.type = 'political' ) politicalDictLabel,\n      ( SELECT d.label FROM `highblue-dict`.sys_dict d WHERE d.id = s.insurance_type_dict_id AND d.type = 'insurance-type' ) insuranceTypeDictLabel,\n      CONCAT_WS('-',( SELECT NAME FROM `view_highblue-space-space_info` WHERE id = vsi.parent_id AND type_dict_id = 16 ),( SELECT NAME FROM `view_highblue-space-space_info` WHERE id = s.room_id AND type_dict_id = 17 )) roomName,\n      ( SELECT so.name FROM `view_highblue-care-care_area` so WHERE so.id = vss.care_area_id) careAreaName,\n      ( SELECT so.name FROM crm_customer_contact_info so WHERE so.crm_customer_id = s.id and so.guardian_flag = 0 LIMIT 1) contactName,\n      ( SELECT so.mobile FROM crm_customer_contact_info so WHERE so.crm_customer_id = s.id and so.guardian_flag = 0 LIMIT 1) contactMobile,\n      CONCAT_WS(',',\n                ( SELECT name from `view_highblue-space-space_info` where FIND_IN_SET(id,get_parent_list(s.room_id)) and type_dict_id = 14),\n                ( SELECT name from `view_highblue-space-space_info` where FIND_IN_SET(id,get_parent_list(s.room_id)) and type_dict_id = 15),\n                ( SELECT name from `view_highblue-space-space_info` where FIND_IN_SET(id,get_parent_list(s.room_id)) and type_dict_id = 16),\n                ( SELECT NAME FROM `view_highblue-space-space_info` WHERE id = s.room_id AND type_dict_id = 17 )) roomFullName\n    FROM\n      crm_customer_tag cct,\n      crm_customer_info s\n    LEFT JOIN\n       `view_highblue-care-care_area_space` vss\n      on s.room_id = vss.space_id\n    left join `view_highblue-space-space_info` vsi\n      on s.room_id = vsi.id\n\n",
      "selfReferencingDataPaths": [],
      "pluginSpecifiedTemplates": [
        {
          "value": true
        }
      ]
    },
    "executeOnLoad": false,
    "dynamicBindingPathList": [],
    "isValid": true,
    "invalids": [],
    "messages": [],
    "jsonPathKeys": [],
    "userSetOnLoad": false,
    "confirmBeforeExecute": false,
    "policies": [],
    "userPermissions": []
  },
  "id": "认知症评估工具_selectCustomerInfo",
  "deleted": false,
  "gitSyncId": "64faeccba746c16892a4d569_65012a689f61e26bb9f89037"
}